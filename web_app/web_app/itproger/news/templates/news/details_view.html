{% extends 'main/base.html' %}

{% block title %}{% endblock %}

{% block content %}

    <div class="container">
        <div class="new-detail">
            <div class="detail-title">
                <h3>{{ post.title }}</h3>
            </div>
            <div class="detail-image">
                <img src="{{ post.image.url }}" width="200" alt="">
            </div>
            <div class="author-date">
                By:{{ post.author }}, on {{ post.create_at|date:"d M"}}
            </div>
            <div class="detail-text">
                {{ post.text }}
            </div>
        </div>
        <div class="detail-tags">
            {% for tag in post.tags.all %}
                <a href="{{ tag.get_absolute_url }}">{{ tag.name }}</a>
            {% endfor %}
        </div>
        <div class="comments-all">
            <div class="comment-count">
                <p>{{ post.get_comment.count }} comments</p>
            </div>
            <div class="comments-detail">
                {% for comment in post.get_comment %}
                    <div class="commentator-name">
                        {{ comment.name }}
                    </div>
                    <div class="commentator-photo">
                        <img src="/static/contact/img/profile.png" alt="profile avatar" width="100">
                    </div>
                    <div class="comment-date">
                        {{ comment.create_at }}
                    </div>
                    <div class="comment-message">
                        {{ comment.message }}   
                    </div>
                {% endfor %}
            </div>
        </div>
        {% if request.user.is_authenticated %}
        <div class="add-comment">
            <h3>Leave a comment</h3>
            <form action="{% url 'create_comment' pk=post.id %}" method="post">
                {% csrf_token %}
                {{ form.name }} 
                {{ form.email }}
                {{ form.website }}
                {{ form.message }}
                <button type="submit">Add</button>
                <button type="reset">Reset</button>
            </form>
        </div>
        {% else %}
        <div class="container">
            <p>Sign in to leave a comment</p>
        </div>
        {% endif %}
    </div>
{% endblock %}